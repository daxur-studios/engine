<div style="flex-direction: row" class="flex-page">
  <lib-html-map [grid]="false" style="flex: 1 1 70%">
    <lib-generated-svg [inputs]="inputs">
      @for (svgPathGroup of svgInputFormArray.controls; track $index) {
      <!---->
      @if(GeneratedSvgForm.isSvgPathControls(svgPathGroup.controls)) {
      <!--Clickable Points-->
      @for (group of svgPathGroup.controls.commands.controls; track $index) {
      <svg:circle
        [attr.r]="5"
        [attr.fill]="'#5900ff'"
        (click)="circleClicked(group)"
        class="command-circle"
        [class.isSelected]="group.controls.isSelected.value"
        cdkDrag
        [cdkDragFreeDragPosition]="{
          x: group.value.position?.x!,
          y: group.value.position?.y!
        }"
        (cdkDragEnded)="dragEnded($event, group)"
      >
        <ng-container *ngIf="group.controls.isSelected.value">
          <animate
            attributeName="r"
            values="5; 10; 5"
            dur="1s"
            repeatCount="indefinite"
          ></animate>
        </ng-container>
      </svg:circle>

      @if (group.value.isSelected) {
      <!--Curve X1, Y1, X2, Y2 Circles-->
      <svg:circle
        [attr.r]="5"
        [attr.fill]="'#ffC059'"
        class="command-circle"
        [class.isSelected]="group.controls.isSelected.value"
        cdkDrag
        [cdkDragFreeDragPosition]="{
          x: group.controls.position.controls.x1.value!,
          y: group.controls.position.controls.y1.value!
        }"
        (cdkDragEnded)="dragEndedCurve1($event, group)"
      ></svg:circle>
      <svg:circle
        [attr.r]="5"
        [attr.fill]="'#ffF059'"
        class="command-circle"
        [class.isSelected]="group.controls.isSelected.value"
        cdkDrag
        [cdkDragFreeDragPosition]="{
          x: group.controls.position.controls.x2.value!,
          y: group.controls.position.controls.y2.value!
        }"
        (cdkDragEnded)="dragEndedCurve2($event, group)"
      ></svg:circle>

      }
      <!---->
      }
      <!---->
      }
      <!---->
      }
    </lib-generated-svg>
  </lib-html-map>
  <lib-svg-ui-editor-sidebar></lib-svg-ui-editor-sidebar>
</div>
